<html xmlns:th="http://www.w3.org/1999/xhtml">
    <head>
        <title>First Web Application</title>
        <script src='https://cdn.plot.ly/plotly-latest.min.js'></script>
        <link type="text/css" rel="stylesheet" href="css/statistics.css">
    </head>
    <body>
        <table class="header">
            <tr>
                <td>
                    <div class="navbar">
                        <ul class="leftList">
                            <li><a href="/welcome">Home</a></li>
                            <li><a href="/profile">Profile</a></li>
                            <li><a class="active" href="/statistics">Statistics</a></li>
                        </ul>
                    </div>
                </td>
                <td style="white-space: nowrap; width: 0.1%">
                    <div class="dropdown">
                        <button class="dropbtn" th:text="${'Hello, '+ID}"></button>
                        <div class="dropdown-content">
                            <a href="#">My Modules</a>
                            <a href="#">Log Out</a>
                        </div>
                    </div>
                </td>
            </tr>
        </table>

        <div class="page">
            <h2>Statistics</h2>

            <div id="myDiv" class="split left"></div>
            <div id="myDiv1" class="split right"></div>

            <div id="displayArea"></div>
            <script th:inline="javascript">
                /*<![CDATA[*/

                var gender_arr = /*[[${num_genders}]]*/ [];
                var data = [
                    {
                        x: ['Male', 'Female', 'Other'],
                        // y: [20, 14, 23],
                        y: gender_arr,
                        type: 'bar',
                        orientation: 'v'
                    }
                ];
                var layout = {
                    title: 'Gender Balance',
                    titlefont:{
                        family: 'Raleway, sans-serif',
                        size: 18
                    },
                    font:{
                        size: 12
                    },
                    showlegend: false,
                    xaxis: {
                        title: 'Genders',
                        tickangle: 0
                    },
                    yaxis: {
                        title: 'Count'
                    }
                };
                Plotly.newPlot('myDiv', data, layout);

                var numStudents = /*[[${num_students}]]*/ 0;
                var numStaff = /*[[${num_staff}]]*/ 0;
                var data1 = [
                    {
                        x: ['Students', 'Staff'],
                        y: [numStudents, numStaff],
                        type: 'bar',
                        orientation: 'v'
                    }
                ];
                var layout1 = {
                    title: 'Students vs Staff Counts',
                    titlefont:{
                        family: 'Raleway, sans-serif',
                        size: 18
                    },
                    font:{
                        size: 12
                    },
                    showlegend: false,
                    xaxis: {
                        title: 'Users',
                        tickangle: 0
                    },
                    yaxis: {
                        title: 'Count'
                    }
                };
                Plotly.newPlot('myDiv1', data1, layout1);

                /*]]>*/
            </script>
        </div>

        <script>
            var coll = document.getElementsByClassName("collapsible");
            var i;

            for (i = 0; i < coll.length; i++) {
                coll[i].addEventListener("click", function() {
                    this.classList.toggle("active");
                    var content = this.nextElementSibling;
                    if (content.style.display === "block") {
                        content.style.display = "none";
                    } else {
                        content.style.display = "block";
                    }
                });
            }


        </script>
    </body>
</html>